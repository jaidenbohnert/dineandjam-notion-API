<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dine & Jam â€“ Performers</title>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #FFE5B4; /* light orange */
    }

    h1 {
      text-align: center;
      padding: 24px 0 10px;
    }

    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 24px;
      padding: 20px 40px 60px;
    }

    .performer-card {
      background: white;
      border-radius: 16px;
      padding: 20px;
      width: 300px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.12);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .performer-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 16px 35px rgba(0,0,0,0.18);
    }

    .performer-card img {
      width: 100%;
      height: 190px;
      object-fit: cover;
      border-radius: 12px;
    }

    .performer-card h3 {
      margin: 12px 0 6px;
    }

    .performer-card p {
      margin: 6px 0;
      font-size: 14px;
      line-height: 1.4;
    }

    .bio {
      font-style: italic;
      color: #444;
    }

    .more-btn {
      margin-top: 14px;
      width: 100%;
      padding: 10px;
      background: #ff9f1c;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 15px;
      cursor: pointer;
    }

    .more-btn:hover {
      background: #ff8500;
    }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow-y: auto;
      background-color: rgba(0,0,0,0.6);
    }

    .modal-content {
      background: white;
      margin: 50px auto;
      padding: 30px;
      border-radius: 16px;
      width: 90%;
      max-width: 600px;
      position: relative;
    }

    .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 24px;
      font-weight: bold;
      color: #333;
      cursor: pointer;
    }

    .modal-content h2 {
      margin-top: 0;
    }

    .modal-content p {
      font-size: 14px;
      margin: 6px 0;
    }

  </style>
</head>

<body>

  <h1>ðŸŽ¶ Dine & Jam Performers</h1>

  <div class="container" id="performers"></div>

  <!-- Modal Structure -->
  <div id="modal" class="modal">
    <div class="modal-content" id="modalContent">
      <span class="close-btn" id="modalClose">&times;</span>
      <div id="modalBody"></div>
    </div>
  </div>

  <script>
    const API_URL = "https://dineandjam-notion-api.vercel.app/api/performers";

    async function loadPerformers() {
      try {
        const res = await fetch(API_URL);
        const performers = await res.json();

        const container = document.getElementById("performers");
        container.innerHTML = "";

        performers.forEach(p => {
          const card = document.createElement("div");
          card.className = "performer-card";

          card.innerHTML = `
            <img src="${p.profilePicture}" alt="${p.name}">
            <h3>${p.name}</h3>
            <p><strong>Genre:</strong> ${p.genre}</p>
            <p><strong>City:</strong> ${p.city || "N/A"}</p>
            <p><strong>Availability:</strong> ${p.availability || "N/A"}</p>
            ${p.bio ? `<p class="bio">${p.bio}</p>` : ""}
            <button class="more-btn">More About Performer</button>
          `;

          // Add event listener for modal
          card.querySelector(".more-btn").addEventListener("click", () => openModal(p));

          container.appendChild(card);
        });

      } catch (err) {
        console.error("Failed to load performers:", err);
      }
    }

    // Modal elements
    const modal = document.getElementById("modal");
    const modalBody = document.getElementById("modalBody");
    const modalClose = document.getElementById("modalClose");

    function openModal(performer) {
      modalBody.innerHTML = `
        <h2>${performer.name}</h2>
        <img src="${performer.profilePicture}" alt="${performer.name}" style="width:100%; height:250px; object-fit:cover; border-radius:12px; margin-bottom:15px;">
        <p><strong>Genre:</strong> ${performer.genre}</p>
        <p><strong>City:</strong> ${performer.city || "N/A"}</p>
        <p><strong>Availability:</strong> ${performer.availability || "N/A"}</p>
        <p><strong>Bio:</strong> ${performer.bio || "N/A"}</p>
        ${performer.email ? `<p><strong>Email:</strong> ${performer.email}</p>` : ""}
        ${performer.phone ? `<p><strong>Phone:</strong> ${performer.phone}</p>` : ""}
        ${
          performer.socials && performer.socials.length
            ? `<p><strong>Socials:</strong><br>${performer.socials.join("<br>")}</p>`
            : ""
        }
        ${
          performer.stripeAccountId
            ? `<p><strong>Stripe ID:</strong> ${performer.stripeAccountId}</p>`
            : ""
        }
      `;
      modal.style.display = "block";
    }

    // Close modal
    modalClose.addEventListener("click", () => modal.style.display = "none");
    window.addEventListener("click", (e) => {
      if (e.target === modal) modal.style.display = "none";
    });

    loadPerformers();
  </script>

</body>
</html>
